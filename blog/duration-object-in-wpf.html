<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Duration Object in WPF</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="../main.css">
    <script src="blog-home.js"></script>
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
</head>
<body>
<span id="navbarContainer">

</span>
<div class="offcanvas offcanvas-start" id="blogList">
    <div class="offcanvas-header">
        <!--        <h1 class="offcanvas-title">Heading</h1>-->
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body">
        <div class="list-group  list-group-flush"" id="postList">
        <a href="#" class="list-group-item list-group-item-action">First item</a>
        <a href="#" class="list-group-item list-group-item-action">Second item</a>
        <a href="#" class="list-group-item list-group-item-action">Third item</a>
    </div>
</div>
</div>

<div class="container mt-5">
    <div class="row">
        <div class="col-sm-2">
<!--            <h4><span class="badge rounded-pill xbtn-primary"  data-bs-toggle="offcanvas" data-bs-target="#blogList" style="cursor: pointer"><< Topics</span></h4>-->
        </div>
        <div class="col-sm-7">
            <!-- -------------------------------------------- -->
            <div class="wp-block-group is-vertical is-layout-flex wp-container-core-group-is-layout-90752e8f wp-block-group-is-layout-flex" style="-webkit-text-stroke-width:0px;align-items:flex-start;background-color:rgb(255, 255, 255);box-sizing:border-box;color:rgb(51, 51, 51);display:flex;flex-flow:column wrap;font-family:Figtree, sans-serif;font-size:16px;font-style:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:300;gap:8px;letter-spacing:normal;margin-block:0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;orphans:2;text-align:start;text-decoration-color:initial;text-decoration-style:initial;text-decoration-thickness:initial;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;">
                <h2 class="wp-block-post-title" style="box-sizing:border-box;font-family:Figtree, sans-serif;font-size:36px;font-style:normal;line-height:1.2;margin:0px;word-break:break-word;">
                    <a target="_blank" rel="noopener noreferrer" href="https://codesphere2.wordpress.com/2025/08/19/duration-object-in-wpf/"><a style="color:currentcolor;display:inline-block;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;text-decoration:none;" target="_self"><strong>Duration&nbsp;object in WPF</strong></a></a>
                </h2>
                <div class="wp-block-group has-global-padding is-layout-constrained wp-block-group-is-layout-constrained" style="box-sizing:border-box;margin:0px;padding-left:0px;padding-right:0px;position:relative;">
                    <div class="wp-block-template-part" style="margin-block:0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                        <div class="wp-block-group is-style-default has-theme-3-color has-text-color has-link-color has-x-small-font-size wp-elements-844914e68d7674a8bd0f2dc07bd00e07 is-nowrap is-layout-flex wp-container-core-group-is-layout-3b7ea385 wp-block-group-is-layout-flex" style="align-items:center;box-sizing:border-box;color:rgb(123, 123, 123) !important;display:flex;flex-wrap:nowrap;font-size:14px !important;gap:6px;">
                            <div class="has-link-color wp-elements-532170ccadab5d7c1d9ee16e79fa7ee6 wp-block-post-date has-text-color has-theme-3-color has-x-small-font-size" style="box-sizing:border-box;color:rgb(123, 123, 123);font-size:14px;margin:0px;">
                                <a style="color:rgb(123, 123, 123);text-decoration:none;" target="_blank" rel="noopener noreferrer" href="https://codesphere2.wordpress.com/2025/08/19/duration-object-in-wpf/"><time datetime="2025-08-19T23:11:29+05:30">August 19, 2025</time></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="entry-content wp-block-post-content has-normal-font-size has-global-padding is-layout-constrained wp-block-post-content-is-layout-constrained" style="-webkit-text-stroke-width:0px;background-color:rgb(255, 255, 255);color:rgb(51, 51, 51);display:flow-root;font-family:Figtree, sans-serif;font-size:16px;font-style:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:300;letter-spacing:normal;margin-block:22px 0px;margin-bottom:22px;margin-left:auto !important;margin-right:auto !important;max-width:720px;orphans:2;padding:0px;text-align:start;text-decoration-color:initial;text-decoration-style:initial;text-decoration-thickness:initial;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;">
                <p style="margin-block:0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    &nbsp;
                </p>
                <h3 class="wp-block-heading" style="font-family:Figtree, sans-serif;font-size:26px;font-style:normal;line-height:1.2;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <strong>What is the&nbsp;</strong><code><strong>Duration</strong></code><strong>&nbsp;Object in WPF?</strong>
                </h3>
                <p style="margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    In WPF,&nbsp;<code>Duration</code>&nbsp;is a&nbsp;<strong>struct</strong>&nbsp;that represents the length of time that an operation (like an animation or a media playback) should take. Unlike a plain&nbsp;<code>TimeSpan</code>, a&nbsp;<code>Duration</code>&nbsp;can express not just a fixed time interval, but also special states:
                </p>
                <ol class="wp-block-list" style="box-sizing:border-box;margin-block:22px 0px;margin-right:auto !important;max-width:720px;">
                    <li data-list-item-id="e7763c35b81c4777e75541fbd4b115ff3">
                        <p style="margin-left:auto !important;">
                            <strong>A specific&nbsp;</strong><code><strong>TimeSpan</strong></code><strong>:</strong>&nbsp;The most common case, representing a fixed length of time (e.g., 5 seconds, 2 minutes).
                        </p>
                    </li>
                    <li data-list-item-id="e4aa2b3df299bda1138ad9daeafe4efaa">
                        <p style="margin-left:auto !important;">
                            <code><strong>Automatic</strong></code>: Indicates that the duration is determined automatically by the system or the content.
                        </p>
                    </li>
                    <li data-list-item-id="e409589453f8fd3f75901c7681f7661a0">
                        <p style="margin-left:auto !important;">
                            <code><strong>Forever</strong></code>: Indicates that the duration is infinite; the operation will continue indefinitely.
                        </p>
                    </li>
                </ol>
                <h3 class="wp-block-heading" style="font-family:Figtree, sans-serif;font-size:26px;font-style:normal;line-height:1.2;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <strong>Why does&nbsp;</strong><code><strong>Duration</strong></code><strong>&nbsp;exist instead of just&nbsp;</strong><code><strong>TimeSpan</strong></code><strong>?</strong>
                </h3>
                <p style="margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    While&nbsp;<code>TimeSpan</code>&nbsp;is excellent for fixed durations, it can’t express “automatic” or “forever” concepts. WPF needed a way to specify these behaviors, especially for:
                </p>
                <ul class="wp-block-list" style="box-sizing:border-box;margin-block:22px 0px;margin-right:auto !important;max-width:720px;">
                    <li data-list-item-id="ef62083434daec9dfc4c810025ea03050">
                        <p style="margin-left:auto !important;">
                            <strong>Animations:</strong>&nbsp;An animation might have a fixed duration (e.g., animate over 2 seconds), or it might run&nbsp;<code>Forever</code>, or its duration might be&nbsp;<code>Automatic</code>&nbsp;(meaning it runs for the natural duration of its target, like a video).
                        </p>
                    </li>
                    <li data-list-item-id="e147407aeea8907a3d1eb12e93813a667">
                        <p style="margin-left:auto !important;">
                            <strong>Media Playback:</strong>&nbsp;A&nbsp;<code>MediaElement</code>‘s&nbsp;<code>NaturalDuration</code>&nbsp;property needs to indicate if it has a known length (<code>TimeSpan</code>), or if it’s a live stream with an&nbsp;<code>Automatic</code>&nbsp;(or unknown/infinite) duration.
                        </p>
                    </li>
                </ul>
                <h3 class="wp-block-heading" style="font-family:Figtree, sans-serif;font-size:26px;font-style:normal;line-height:1.2;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <strong>Key Properties of&nbsp;</strong><code><strong>Duration</strong></code>
                </h3>
                <ol class="wp-block-list" style="box-sizing:border-box;margin-block:22px 0px;margin-right:auto !important;max-width:720px;">
                    <li data-list-item-id="eac2c757ec377ed81f090a4e4aa11b0f3">
                        <p style="margin-left:auto !important;">
                            <code><strong>HasTimeSpan</strong></code>: A&nbsp;<code>bool</code>&nbsp;property. Returns&nbsp;<code>true</code>&nbsp;if the&nbsp;<code>Duration</code>&nbsp;represents a specific&nbsp;<code>TimeSpan</code>&nbsp;value;&nbsp;<code>false</code>&nbsp;otherwise (i.e., if it’s&nbsp;<code>Automatic</code>&nbsp;or&nbsp;<code>Forever</code>).
                        </p>
                    </li>
                    <li data-list-item-id="ee79121d156a4901ad661911a481149da">
                        <p style="margin-left:auto !important;">
                            <code><strong>TimeSpan</strong></code>: A&nbsp;<code>TimeSpan</code>&nbsp;property. If&nbsp;<code>HasTimeSpan</code>&nbsp;is&nbsp;<code>true</code>, this property returns the underlying&nbsp;<code>TimeSpan</code>&nbsp;value. If&nbsp;<code>HasTimeSpan</code>&nbsp;is&nbsp;<code>false</code>, accessing this property will throw an&nbsp;<code>InvalidOperationException</code>. You&nbsp;<i>must</i>&nbsp;check&nbsp;<code>HasTimeSpan</code>&nbsp;before trying to access this.
                        </p>
                    </li>
                    <li data-list-item-id="eab0751ddd2cd60e72d1e2c5e0ea4ecce">
                        <p style="margin-left:auto !important;">
                            <code><strong>Automatic</strong></code><strong>&nbsp;(Static Property)</strong>: A static read-only property that returns a&nbsp;<code>Duration</code>&nbsp;struct representing an automatic duration.
                        </p>
                    </li>
                    <li data-list-item-id="e2519783680d46d99995e26bc499d1a8e">
                        <p style="margin-left:auto !important;">
                            <code><strong>Forever</strong></code><strong>&nbsp;(Static Property)</strong>: A static read-only property that returns a&nbsp;<code>Duration</code>&nbsp;struct representing an infinite duration.
                        </p>
                    </li>
                </ol>
                <h3 class="wp-block-heading" style="font-family:Figtree, sans-serif;font-size:26px;font-style:normal;line-height:1.2;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <strong>Creating&nbsp;</strong><code><strong>Duration</strong></code><strong>&nbsp;Objects</strong>
                </h3>
                <p style="margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    You can create&nbsp;<code>Duration</code>&nbsp;objects in a few ways:
                </p>
                <ol class="wp-block-list" style="box-sizing:border-box;margin-block:22px 0px;margin-right:auto !important;max-width:720px;">
                    <li class="ck-list-marker-bold" data-list-item-id="eb61f8f768ffb4a9a3220c7923b971058">
                        <p style="margin-left:auto !important;">
                            <strong>From a&nbsp;</strong><code><strong>TimeSpan</strong></code><strong>&nbsp;(most common):</strong>
                        </p>
                    </li>
                </ol>
                <ol class="wp-block-list" style="box-sizing:border-box;margin-block:22px 0px;margin-right:auto !important;max-width:720px;">
                    <li data-list-item-id="e1f752a492d4c1bf1e42fbbaf48b1ac76">
                        <p style="margin-left:auto !important;">
                            &nbsp;
                        </p>
                    </li>
                </ol>
                <pre class="wp-block-code has-theme-2-background-color has-background" style="background-color:rgb(221, 221, 221) !important;box-sizing:border-box;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;"><code class="language-plaintext" style="direction:ltr;display:block;font-family:inherit;overflow-wrap:break-word;text-align:initial;white-space:pre-wrap;">Duration fiveSeconds = new Duration(TimeSpan.FromSeconds(5));
Duration twoMinutes = new Duration(new TimeSpan(0, 2, 0));
// hours, minutes, seconds</code></pre>
                <ol class="wp-block-list" style="box-sizing:border-box;margin-block:22px 0px;margin-right:auto !important;max-width:720px;">
                    <li class="ck-list-marker-bold" data-list-item-id="e294529aed88a7b6eabcae8ca8a9c84dd">
                        <p style="margin-left:auto !important;">
                            <strong>​Using&nbsp;</strong><code><strong>Automatic</strong></code><strong>&nbsp;or&nbsp;</strong><code><strong>Forever</strong></code><strong>&nbsp;static properties:</strong>
                        </p>
                    </li>
                </ol>
                <pre class="wp-block-code has-theme-2-background-color has-background" style="background-color:rgb(221, 221, 221) !important;box-sizing:border-box;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;"><code class="language-plaintext" style="direction:ltr;display:block;font-family:inherit;overflow-wrap:break-word;text-align:initial;white-space:pre-wrap;">Duration automaticDuration = Duration.Automatic;
Duration infiniteDuration = Duration.Forever;</code></pre>
                <h3 class="wp-block-heading" style="font-family:Figtree, sans-serif;font-size:26px;font-style:normal;line-height:1.2;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <strong>Common Use Cases and Examples</strong>
                </h3>
                <h4 class="wp-block-heading" style="font-family:Figtree, sans-serif;font-size:clamp(22px, 1.608px + 1.625rem - 0.536vw, 18px);font-style:normal;line-height:1.3;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <strong>1.&nbsp;</strong><code><strong>MediaElement.NaturalDuration</strong></code>
                </h4>
                <p style="margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    This is the most direct connection to our previous discussions. The&nbsp;<code>NaturalDuration</code>&nbsp;property of a&nbsp;<code>MediaElement</code>&nbsp;is a&nbsp;<code>Duration</code>&nbsp;struct.
                </p>
                <pre class="wp-block-code has-theme-2-background-color has-background" style="background-color:rgb(221, 221, 221) !important;box-sizing:border-box;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;"><code class="language-plaintext" style="direction:ltr;display:block;font-family:inherit;overflow-wrap:break-word;text-align:initial;white-space:pre-wrap;">using System;
using System.Windows.Media; // For MediaElement

// Inside your MediaElement_MediaOpened event handler:
private void MyMediaElement_MediaOpened(object sender, RoutedEventArgs e)
{
    // Check if the media has a definite length
    if (MyMediaElement.NaturalDuration.HasTimeSpan)
    {
        // If it does, access the TimeSpan component
        TimeSpan totalLength = MyMediaElement.NaturalDuration.TimeSpan;
        MessageBox.Show($"Media has a duration of: {totalLength.Minutes:D2}:{totalLength.Seconds:D2}");

        // Now you can use this totalLength to set the Maximum of a slider, for example
        // PositionSlider.Maximum = totalLength.TotalSeconds;
    }
    else if (MyMediaElement.NaturalDuration == Duration.Automatic)
    {
        MessageBox.Show("Media duration is Automatic (e.g., live stream).");
    }
    else if (MyMediaElement.NaturalDuration == Duration.Forever)
    {
        MessageBox.Show("Media duration is Forever (e.g., infinite loop).");
    }
}</code></pre>
                <h4 class="wp-block-heading" style="font-family:Figtree, sans-serif;font-size:clamp(22px, 1.608px + 1.625rem - 0.536vw, 18px);font-style:normal;line-height:1.3;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <strong>2. Animations (e.g.,&nbsp;</strong><code><strong>DoubleAnimation</strong></code><strong>,&nbsp;</strong><code><strong>Storyboard</strong></code><strong>)</strong>
                </h4>
                <p style="margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    The&nbsp;<code>Duration</code>&nbsp;property is fundamental for controlling the length of animations in WPF.
                </p>
                <p style="margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <strong>XAML Example (Animating a Rectangle’s Width):</strong>
                </p>
                <p style="margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <strong>C# Example (Programmatically Starting an Animation with&nbsp;</strong><code><strong>Forever</strong></code><strong>):</strong>
                </p>
                <pre class="wp-block-code has-theme-2-background-color has-background" style="background-color:rgb(221, 221, 221) !important;box-sizing:border-box;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;"><code class="language-plaintext" style="direction:ltr;display:block;font-family:inherit;overflow-wrap:break-word;text-align:initial;white-space:pre-wrap;">&lt;Window x:Class="DurationDemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Duration Animation Demo" Height="250" Width="400"&gt;
    &lt;StackPanel Margin="20" HorizontalAlignment="Center"&gt;
        &lt;Rectangle x:Name="MyRectangle" Fill="Blue" Width="50" Height="50" Margin="20"&gt;
            &lt;Rectangle.Triggers&gt;
                &lt;EventTrigger RoutedEvent="Loaded"&gt;
                    &lt;BeginStoryboard&gt;
                        &lt;Storyboard&gt;
                            &lt;DoubleAnimation Storyboard.TargetName="MyRectangle"
                                             Storyboard.TargetProperty="Width"
                                             From="50" To="200"
                                             Duration="0:0:3"  AutoReverse="True" RepeatBehavior="Forever"/&gt;

                            &lt;DoubleAnimation Storyboard.TargetName="MyRectangle"
                                             Storyboard.TargetProperty="Height"
                                             From="50" To="150"
                                             Duration="0:0:5"
                                             AutoReverse="True" RepeatBehavior="Forever"/&gt;
                        &lt;/Storyboard&gt;
                    &lt;/BeginStoryboard&gt;
                &lt;/EventTrigger&gt;
            &lt;/Rectangle.Triggers&gt;
        &lt;/Rectangle&gt;

        &lt;Button Content="Start Forever Animation" Click="StartForeverAnimation_Click" Margin="0,20,0,0"/&gt;
    &lt;/StackPanel&gt;
&lt;/Window&gt;</code></pre>
                <p style="margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <strong>​C# Example (Programmatically Starting an Animation with&nbsp;</strong><code><strong>Forever</strong></code><strong>):</strong>
                </p>
                <pre class="wp-block-code has-theme-2-background-color has-background" style="background-color:rgb(221, 221, 221) !important;box-sizing:border-box;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;"><code class="language-plaintext" style="direction:ltr;display:block;font-family:inherit;overflow-wrap:break-word;text-align:initial;white-space:pre-wrap;">using System;
using System.Windows;
using System.Windows.Media.Animation; // For DoubleAnimation, Storyboard

namespace DurationDemo
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void StartForeverAnimation_Click(object sender, RoutedEventArgs e)
        {
            DoubleAnimation opacityAnimation = new DoubleAnimation
            {
                From = 1.0,
                To = 0.2,
                Duration = Duration.Forever, // This animation will run indefinitely
                AutoReverse = true,
                RepeatBehavior = RepeatBehavior.Forever
            };

            Storyboard storyboard = new Storyboard();
            storyboard.Children.Add(opacityAnimation);
            Storyboard.SetTargetName(opacityAnimation, MyRectangle.Name); // Link animation to Rectangle
            Storyboard.SetTargetProperty(opacityAnimation, new PropertyPath(Rectangle.OpacityProperty));

            // Start the storyboard
            storyboard.Begin(MyRectangle); // Begin the storyboard on the Rectangle
        }
    }
}</code></pre>
                <p style="margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    In the XAML for animation,&nbsp;<code>Duration="0:0:3"</code>&nbsp;is a shorthand notation that WPF recognizes as a&nbsp;<code>TimeSpan</code>&nbsp;value.
                </p>
                <h3 class="wp-block-heading" style="font-family:Figtree, sans-serif;font-size:26px;font-style:normal;line-height:1.2;margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <strong>Key Takeaway</strong>
                </h3>
                <p style="margin-block:22px 0px;margin-left:auto !important;margin-right:auto !important;max-width:720px;">
                    <code>Duration</code>&nbsp;is WPF’s flexible way to specify the length of time-based operations, allowing for fixed&nbsp;<code>TimeSpan</code>&nbsp;values, or the special&nbsp;<code>Automatic</code>&nbsp;and&nbsp;<code>Forever</code>&nbsp;states, which are particularly useful for dynamic content like media or continuous animations. Always check&nbsp;<code>HasTimeSpan</code>&nbsp;before trying to get the&nbsp;<code>TimeSpan</code>&nbsp;value from a&nbsp;<code>Duration</code>&nbsp;object.
                </p>
            </div>
            <!-- ---------------------------------------------- -->
        </div>
        <div class="col-sm-3">
            Ads
        </div>
    </div>


</div>
<!-- footer -->
<script>
    //*** Navbar
    let navbarContainer = document.getElementById("navbarContainer");
    function loadNavbar(){
        fetch("../navbar.html")
            .then(res => res.text())
            .then(data => navbarContainer.innerHTML = data);
    }

    loadNavbar()
    //********* post list
    const postList = document.getElementById("postList");
    let listContents = "";
    function fillList(){
        for(let i=0; i<postContent.length; i++){
            //<a href="#" class="list-group-item list-group-item-action">First item</a>
            let title = postContent[i].title;
            let url = postContent[i].url;
            listContents += "<a href="+url+" class=\"list-group-item list-group-item-action\">"+title+"</a>";
        }
        postList.innerHTML = listContents;
    }
    fillList();

</script>
<!----        CEO optimization script          -->
<script src = "../dynamic_seo.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        // const path = window.location.pathname.split("/")[1] || "home";
        // updateMetaTags(path.toLowerCase());
        updateMetaTags("blog");
    });
</script>
</body>
</html>